# 不推荐开发微信小程序

> 2018/9/19
>
> 微信 ~~开放~~ **封闭** 平台小程序的一些坑，seriously 🙃

## 写在前面

最近和 _Team 56_ 的小伙伴们体验了一下微信平台的小程序开发，开发了一个 [本地新闻小程序 —— 嗅嗅新鲜事](https://github.com/BOT-Man-JL/xiuxiu)（Demo）。

经过这次开发，我体会到了 2 年前一次黑客马拉松上听到的一句话：

> 微信平台的最大不足，就是过于 **封闭** ...

对比当时使用 [Slack 开放平台](https://api.slack.com/)，现在切身体会到了 —— **不推荐开发微信小程序**。

本文简单的吐槽一下这次开发中，遇到的一些坑。

## 并不简单的 Web 开发 —— WXML 不是 HTML

首次创建小程序例子项目的时候，乍一看，这不就是 [vue](https://cn.vuejs.org/) 风格的前端框架吗？写了一段时间之后，才发现：小程序的 [WXML](https://developers.weixin.qq.com/miniprogram/dev/quickstart/basic/file.html) 并不是想象中的 HTML！小程序开发并不是简单的 Web 前端开发！

### 不能动态修改节点结构

在 JavaScript 里，经常能看到类似下面的语句：

``` js
document.querySelector(".log").innerHTML += msg + "<br/>";
```

- 首先，选中 DOM 元素
- 然后，修改选中元素的子元素
- 最后，实现修改页面的内容和样式

而小程序的设计思路和上边的代码大相径庭 —— 不能动态修改 DOM 元素结构，只能通过修改 `class` 或使用 [`wx:if` 条件渲染](https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxml/conditional.html) 动态修改样式。。。

尽管小程序也提供了一些 [节点信息获取方法](https://developers.weixin.qq.com/miniprogram/dev/api/wxml-nodes-info.html)，却仍然无法实现丰富的功能。

由于不能动态修改页面节点结构，小程序更适合

> [封闭式的、逻辑简单的](http://www.cnblogs.com/yingwo/p/5912797.html) 的应用。

简单说来，就是在小程序里展示一篇文章，文章的版式和样式都是固定的；而如果使用网页展示一篇文章，文章的版式和样式都可以灵活的定制。如果想要在小程序里引入新的样式，则需要为小程序编写新样式，然后发布新版本。

> 好处是：小程序发布后，结构基本不变，**不能显示未审核的内容**。

### 不支持外链

小程序只能显示内置页面；如果要显示外部网页，则需要使用 [WebView 组件](https://developers.weixin.qq.com/miniprogram/dev/component/web-view.html)。（可以类比公众号不支持外链）

> 好处是：收紧外链展示入口，易于 **监控、审核外链内容**。

### 原生组件

和一般的 Web App 不一样，小程序提供了一些基本的 [原生组件](https://developers.weixin.qq.com/miniprogram/dev/component/native-component.html)（例如，视频播放器）。

原生组件使用上虽然比较方便，但是会有一些问题：一方面，原生组件不易自己定制（比如设计样式）；另一方面，原生组件交互上体验不是太好（比如视频播放器组件进度条体验不大好）。

另外，许多原生组件的使用需要特殊的权限申请（例如，视频播放需要媒体牌照）。

> 好处是：收紧富媒体内容入口，易于 **对富媒体内容进行审查**。

## 权限和审核

微信对小程序有着严格的 **功能范围限制**：

- 如果小程序需要支持 **音视频播放**，就需要向微信申请媒体 **权限**；如果需要实时音视频流的播放，还会有额外的一些限制。
- 如果小程序需要支持 **交流、评论** 的功能，也需要特殊的 **权限**。
- **WebView 组件** 并不对所有小程序开放，也需要申请相应 **权限**。

申请这些权限，一方面需要提供相关材料，另一方面还要走复杂的申请-审核流程。如果需要 **发布** 小程序，需要先提交代码，待 **微信审核** 通过后，才能上线。

而如果在开放的互联网里，开发 Web 应用，则不需要关心太多权限、审核的问题。

## 写在最后

在一个封闭的平台下，一切都弥漫着审核的气息，不禁让我想起 2 年前第一次接触 Web 前端，就有幸体验到了什么叫做 **开放平台**。

另外，小程序的组件还存在许多可用性问题。比如，[滑块视图容器 swiper](https://developers.weixin.qq.com/miniprogram/dev/component/swiper.html) 删除滑块时，可能会导致所有滑块变成不可用的灰色。

综上，**不推荐开发微信小程序**。

如果有什么问题，**欢迎交流**。😄

Delivered under MIT License &copy; 2018, BOT Man
